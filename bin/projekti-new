#!/usr/bin/env ruby
# frozen_string_literal: true

require 'thor'
# require 'fileutils'
# require 'csv'

# PROJEKTI class: list projects and their directories.
class Projekti < Thor
  default_task :tila

  desc 'dir', 'show the project directory.'
  def dir
    #
  end

  desc 'go', 'go to the project directory.'
  def go
    #
  end

  desc 'tila', 'show the git project status message in one line.'
  def tila
    status
  end

  private

  def status
    message = `git status`
    status_message = `git status`.to_s.gsub("\n", ' ')
    if status_message.include?('master')
      update = "$(git status | \grep 'On branch' | \grep origin)"
      if status_message.include?('ahead')
        puts 'You are ahead of master branch in commits.'
      else
        if status_message.include?('date')
        puts update
        end
      end
    else
      puts 'Not in master branch.'
    end
    puts "STATUS:\n#{status_message}"
  end

end

Projekti.start(ARGV)
