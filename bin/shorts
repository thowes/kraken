#!/bin/bash

if [ "_$1_" == "__" ]; then
	KR_DEBUG=true debug "BIN/SHORTS" "$1 $2 $3"
	case $1 in
		desktop)
			KR_DIR_LNK=$(asetus dir:lnk)
			KR_DIR_DT=$(asetus dir:dt)
			KR_NETWORK=nada
			if [ -d $KR_DIR_LNK/ ] && [ "_$2_" == "__" ]; then
				if [ -d $KR_DIR_LNK/COMP/$HOSTNAME ]; then \cp $KR_DIR_LNK/COMP/$HOSTNAME/*.* $KR_DIR_DT/; else virhe "SHORTS/dt: dir" $KR_DIR_LNK/COMP/$HOSTNAME "not found."; fi
				if [ -d $KR_DIR_LNK/USER/$USER ]; then \cp $KR_DIR_LNK/USER/$USER/*.* $KR_DIR_DT/; else virhe "SHORTS/dt: dir" $KR_DIR_LNK/USER/$USER "not found."; fi
				if [ -d $KR_DIR_LNK/KTXT/$KR_NETWORK/ ]; then \cp $KR_DIR_LNK/KTXT/$KR_NETWORK/*.* $KR_DIR_DT/; else virhe "SHORTS/dt: dir" $KR_DIR_LNK/KTXT/$KR_NETWORK "not found."; fi
				if [ -d $KR_DIR_LNK/PROG/$2 ]; then \cp $KR_DIR_LNK/PROG/$2/*.* $KR_DIR_DT/; fi #else virhe "SHORTS dir dt-prog" $1 $2 "not found."; fi
			else virhe "SHORTS/dt dir" $KR_DIR_LNK "not found."; fi
			if [ -d $KR_DIRPO/.desktop_links ] && [ "_$KR_DIRPO_" == "__" ]; then
				\cp $KR_DIRPO/.desktop_links/*.* $KR_DIR_DT/; 
			else
				if [ -d $KR_DIR_LNK/PROJ/$2 ]; then \cp $KR_DIR_LNK/PROJ/$2/*.* $KR_DIR_DT/; else virhe "Directory .desktop_links not found for project" $1 $2; fi
			fi
			;;
		*) kaiku SHORTS dt;;
	esac
else
	shorts clear
fi
