#!/usr/bin/env ruby
# frozen_string_literal: true

require 'thor'
# require 'fileutils'

# manages TYNNYRI file.
class Tynnyri < Thor
  # alias
  default_task :default

  desc 'add', 'add to tynnyri.'
  def add(tynnyri_input)
    file = tynnyri_file
    if File.exists?(file)
      File.open(file, 'w') {|f| f.write(tynnyri_input) }
    else puts file
      puts file
    end
  end

  desc 'default', 'the default TYNNYRI command.'
  def default(arg2, arg3 == nil)
    if arg2.nil?
      puts "nil"
    elsif arg2 == "add" && arg3.not_nil?
      add arg
    elsif arg2 == "add" && arg3.nil?
      puts "add"
    elsif arg2 == "delete"
      delete
    elsif arg2 == "kick"
      kick
    elsif arg2 == "new" || arg2 == "reset"
      reset
    elsif arg2 == "print"
      puts "show"
      show
    else
      add arg2
    end
  end

  desc 'delete', 'delete TYNNYRI.'
  def delete
    puts "TYNNYRI: delete"
  end

  desc 'kick', 'kick TYNNYRI.'
  def kick
    puts "TYNNYRI: kick"
  end

  desc 'print', 'print TYNNYRI.'; 
  # puts "TYNNYRI: print"

  desc 'reset', 'reset TYNNYRI.'
  def reset
    puts "TYNNYRI: reset"
  end
  def print; puts "TYNNYRI: print"; end

  private

  def tynnyri_file
    `asetus dir:temp` + `verkko tty` + ".tynnyri"
  end
end

Tynnyri.start(ARGV)

