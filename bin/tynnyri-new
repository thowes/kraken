#!/usr/bin/env ruby
# frozen_string_literal: true

require 'thor'

# require 'fileutils'

class Tynnyri < Thor
  # alias
  default_task :default

  desc 'add', 'add to tynnyri.'
  def add(tynnyri_input)
    file = tynnyri_file
    if File.exists?(file)
      File.open(file, 'w') {|f| f.write(tynnyri_input) }
    else puts file
      puts file
    end
  end

  desc 'default', 'the default tynnyri command.'
  def default(arg2, arg3 == nil)
    if arg2.nil?
      add arg
    elsif arg2 == "add" && arg3.not_nil?
    elsif arg2 == "add" && arg3.nil?
      puts "add"
    elsif arg2 == "kick"
      kick
    elsif arg2 == "new"
      reset
    elsif arg2 == "delete"
      delete
    else
      add arg2
    end
  end

  desc 'delete', 'delete tynnyri.'
  def delete
    puts "delete"
  end

  desc 'kick', 'kick tynnyri.'
  def kick
    puts "kick"
  end

  desc 'new', 'new tynnyri.'
  def reset
    puts "new"
  end

  private

  def tynnyri_file
    `verkko tty` + ".tynnyri" # /path/
  end
end

Tynnyri.start(ARGV)

